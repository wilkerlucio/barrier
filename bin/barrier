#!/usr/bin/env node

require("coffee-script");

var pkg = require("../package.json");

var program = require('commander');

program
  .version(pkg.version)
  .usage("[options] <file ...>")
  .option("-v, --verbose")
  .parse(process.argv);

var Runner = require("../lib/runner");
var Path = require("path");
var _ = require("underscore");

var files = _.map(program.args, function(path) { return Path.resolve(path); });

var runner = new Runner();

runner.run(files)
  .then(function(passed) {
    process.exit(passed ? 0 : 1);
  });
